version: '3'


services:

  nginx:
    image: nginx:latest
    networks:
      - lifehub_v2

    build: 
      context: ./reverse-proxy
      dockerfile: Dockerfile
    container_name: nginx_c_v2
    ports:
      - "80:80"
      
  django: 
    image: python:3.12-slim
    networks:
      - lifehub_v2

    build: 
      context: ./django
      dockerfile: Dockerfile
    container_name: django_c_v2
    ports:
      - 8000:8000

  react:
    image: node:22-alpine
    networks:
      - lifehub_v2
    build: 
      context: ./react/app
      dockerfile: Dockerfile
    container_name: react_c_v2
    ports:
      - 5173:5173

  go:
    image: golang:1.22-alpine
    networks:
      - lifehub_v2

    build: 
      context: ./go
      dockerfile: Dockerfile
    container_name: go_c_v2
    ports:
      - 8081:8081

  nodejs:
    image: node:20-alpine
    networks:
      - lifehub_v2

    build: 
      context: ./nodejs
      dockerfile: Dockerfile
    container_name: nodejs_c_v2
    ports:
      - 3000:3000

  ruby:
    image: ruby:3.2-alpine
    networks:
      - lifehub_v2

    build: 
      context: ./ruby/app
      dockerfile: Dockerfile
    container_name: ruby_c_v2
    environment:
      - SECRET_KEY_BASE="3d962bc93f3fbb38ab92ce20c5c4fe3d4e76492f138976fe6733ab9cc1353b1d04153ab1e1ddab9f33e3c7129df0896018c1b2a360a383902c51ab6284972b56"
    ports:
      - 4567:4567 
  # tomcat10:
  #   image: tomcat:10.1.18-jdk17-temurin-alpine
  #   networks:
  #     - lifehub_v2
  #   restart: always
  #   build: 
  #     context: ./tomcat10
  #     dockerfile: Dockerfile
  #   container_name: tomcat10_c_v2

  
networks:
  lifehub_v2:
    driver: bridge

